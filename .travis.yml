sudo: false
language: node_js
node_js:
  - '4.2'
branches:
  only:
    - source

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - gcc-4.8
      - g++-4.8
      - libcairo2-dev
      - libjpeg8-dev
      - libgif-dev
      - libpango1.0-dev
      - graphicsmagick
      - libjpeg-turbo-progs
      - inkscape

env:
  global:
    - CXX='g++-4.8'
    - CC='gcc-4.8'

before_install:
  - rvm install 2.1.1
before_script:
  - git config --global user.name 'Travis-CI'
  - git config --global user.email 'travis@hardwarelivreusp.org'
  - gem install bundler
  - bundle install

# Silent the script output, we don't want any key made public in the Travis log
script: npm run-script deploy

# Compiling a lot of our dependencies takes forever. We're caching thema
cache:
  bundler: true
  directories:
    - node_modules
